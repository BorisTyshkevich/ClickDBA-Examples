## Practical notes
- SQL `UPDATE` using patch parts is called a “lightweight update”.
- In ClickHouse `25.7`, lightweight updates are **experimental**.
- Updated values become **visible to queries immediately** (no need to wait for background merges).
- Patch parts store only changed column values plus targeting metadata, and are later applied during background merges.

## Settings & knobs
- `allow_experimental_lightweight_update = 1`
- Table setting changes:
  - `enable_block_number_column = 1`
  - `enable_block_offset_column = 1`
- Note: Expected to enter **beta** in `25.8`.

## Examples
```sql
SET allow_experimental_lightweight_update = 1;

ALTER TABLE orders
  MODIFY SETTING enable_block_number_column = 1, enable_block_offset_column = 1;

UPDATE orders
SET quantity = 60, discount = 0.20
WHERE order_id = 1001 AND item_id = 'mouse';
```

```sql
UPDATE orders
SET discount = 0.2
WHERE quantity >= 40;
```
- Works with standard SQL `UPDATE` syntax.

## Gotchas
- `25.7`: lightweight `UPDATE` is **experimental** and must be explicitly enabled.
- Requires enabling extra table settings (`enable_block_number_column`, `enable_block_offset_column`) before relying on patch-part updates.

## Verification
```sql
SELECT *
FROM orders
WHERE order_id = 1001 AND item_id = 'mouse';
```
- Verify the row reflects new values right after `UPDATE` (immediate visibility claim).
- For bulk updates (e.g., `quantity >= 40`), spot-check a few qualifying rows to confirm `discount = 0.2`.
- Confirm settings were applied: `SET allow_experimental_lightweight_update = 1` and the table has the required settings enabled (mechanism/queries not provided in this chunk).